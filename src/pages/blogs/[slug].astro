---
import { marked } from "marked";
import BlogPage from "../../components/blogs/BlogPage";
import { getAllPostByUsername, getPostBySlug } from "../../functions/hashnode";

export async function getStaticPaths() {
  const posts = await getAllPostByUsername("blog.kishans.in");
  return posts.map((post) => ({
    params: { slug: post.slug },
    props: { post },
  }));
}

const { slug } = Astro.params;

const blog = await getPostBySlug(slug, "blog.kishans.in");
console.log(blog);
const content = marked.parse(blog.content.markdown);
---

<BlogPage client:load post={blog} />

<div set:html={content} />
